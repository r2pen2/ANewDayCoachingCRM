import { hostname } from "./db/dbManager.ts";

export async function getCalendarEvents(email) {
  return new Promise<any>((resolve, reject) => {
    fetch(hostname + `/calendar/events?invitee=${email}`).then((res) => {
      res.json().then((data) => {
        resolve(data)
      })
    })
  })
}

const mockEventData = {
  "events":[
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-19T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-19T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-20T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-20T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-21T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-21T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-22T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-22T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-23T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-23T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-24T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-24T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-25T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-25T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-26T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-26T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-27T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-27T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-28T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-28T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-29T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-29T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-30T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-30T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
    {"kind":"calendar#event","etag":"\"3428838388434000\"","id":"_7124cgi484skaba4851j0b9k8ork8b9p652jaba36h230c1n8514cd1k8k","status":"confirmed","htmlLink":"https://www.google.com/calendar/event?eid=XzcxMjRjZ2k0ODRza2FiYTQ4NTFqMGI5azhvcms4YjlwNjUyamFiYTM2aDIzMGMxbjg1MTRjZDFrOGsgam9lZG9iYmVsYWFyQG0","created":"2024-04-29T19:32:56.000Z","updated":"2024-04-29T19:33:14.217Z","summary":"Joe's Coaching Appointment","creator":{"email":"rdayanim@gmail.com"},"organizer":{"email":"rdayanim@gmail.com"},"start":{"dateTime":"2024-05-31T15:00:00-04:00","timeZone":"America/New_York"},"end":{"dateTime":"2024-05-31T16:00:00-04:00","timeZone":"America/New_York"},"iCalUID":"8DFBDA9E-DAC0-4F7D-91E5-C4D007ABF44E","sequence":0,"attendees":[{"email":"rdayanim@gmail.com","organizer":true,"responseStatus":"accepted"},{"email":"jdobbelaar@gmail.com"},{"email":"joedobbelaar@gmail.com","self":true,"responseStatus":"needsAction"}],"reminders":{"useDefault":true},"eventType":"default"},
  ]
}

export class EventWrapper {

  href: string;
  createdAt: Date;
  startAt: Date;
  endAt: Date;
  summary: string;
  organizer: string;
  id: string;

  constructor(event: any) {
    this.href = event.htmlLink
    this.createdAt = new Date(event.created)
    this.startAt = new Date(event.start.dateTime)
    this.endAt = new Date(event.end.dateTime)
    this.summary = event.summary
    this.organizer = event.organizer
    this.id = event.id
  }
}

export const mockEvents = mockEventData.events.map((event) => new EventWrapper(event))
